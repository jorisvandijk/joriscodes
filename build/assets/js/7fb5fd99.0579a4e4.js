"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[4487],{3579:(n,e,r)=>{r.r(e),r.d(e,{assets:()=>o,contentTitle:()=>s,default:()=>p,frontMatter:()=>c,metadata:()=>i,toc:()=>d});const i=JSON.parse('{"id":"linux/Scripting/ArchMaintenance","title":"Arch Linux Maintenance","description":"It\'s a good idea to keep your system well maintained. Arch has a wiki article in which they describe best practices on how to maintain your Arch system according to them.","source":"@site/docs/linux/Scripting/ArchMaintenance.md","sourceDirName":"linux/Scripting","slug":"/linux/Scripting/ArchMaintenance","permalink":"/linux/Scripting/ArchMaintenance","draft":false,"unlisted":false,"editUrl":"https://codeberg.org/jorisvandijk/joriscodes/src/branch/main/docs/linux/Scripting/ArchMaintenance.md","tags":[{"inline":true,"label":"Linux","permalink":"/tags/linux"},{"inline":true,"label":"Arch","permalink":"/tags/arch"},{"inline":true,"label":"Scripting","permalink":"/tags/scripting"}],"version":"current","lastUpdatedBy":"Joris","lastUpdatedAt":1731918280000,"sidebarPosition":1,"frontMatter":{"sidebar_position":1,"tags":["Linux","Arch","Scripting"]},"sidebar":"docsSidebar","previous":{"title":"Linux","permalink":"/category/linux"},"next":{"title":"ScreenShot","permalink":"/linux/Scripting/ScreenShot"}}');var t=r(4848),a=r(8453);const c={sidebar_position:1,tags:["Linux","Arch","Scripting"]},s="Arch Linux Maintenance",o={},d=[];function h(n){const e={a:"a",code:"code",h1:"h1",header:"header",p:"p",pre:"pre",...(0,a.R)(),...n.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(e.header,{children:(0,t.jsx)(e.h1,{id:"arch-linux-maintenance",children:"Arch Linux Maintenance"})}),"\n",(0,t.jsxs)(e.p,{children:["It's a good idea to keep your system well maintained. Arch has a ",(0,t.jsx)(e.a,{href:"https://wiki.archlinux.org/title/system_maintenance",children:"wiki article"})," in which they describe best practices on how to maintain your Arch system according to them."]}),"\n",(0,t.jsx)(e.p,{children:"So I went through the article and found that some of these things I already do, like updating my system and packages, or removing orphaned packages. But other things I rarely do, like checking if systemd services have failed. So I decided to cherry-pick a number of actions I think are great and put those in a little bash script, which I could then run from time to time in order to keep my system running smoothly for years to come."}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-bash",metastring:"showLineNumbers",children:'#!/usr/bin/env bash\n\n#\tArchMaintainer 1.4\n#\tPerforms maintenance and removes excess stuff from Arch. \n#\tDependencies: pacman, git, pacman-contrib, rankmirrors\n#\n#\tBy Joris van Dijk | Jorisvandijk.com\n#\tLicensed under the GNU General Public License v3.0\n\nGRN=\'\\033[0;32m\'\nNC=\'\\033[0m\'\n\n# Check for failed systemd services \nprintf "\\n${GRN}>> Checking failed services:${NC}\\n"\nsystemctl --failed\n\n# Remove orphaned packages\nprintf "\\n${GRN}>> Removing orphaned packages if any.${NC}\\n"\nsudo pacman -Rs $(pacman -Qqtd) --noconfirm\nprintf "If \'no targets specified\', no orphaned packages were found.\\n"\n\n# Delete Pacman cache\nprintf "\\n${GRN}>> Deleting Pacman cache.${NC}"\nprintf "\\nCurrent size: "\nsudo du -sh /var/cache/pacman/pkg/\nsudo pacman -Scc --noconfirm\nprintf "\\nNew size: "\nsudo du -sh /var/cache/pacman/pkg/\n\n# Empty ~/.cache\nprintf "\\n${GRN}>> Emptying ~/.cache.${NC}"\nprintf "\\nCurrent size: "\ndu -sh $HOME/.cache\nrm -rf $HOME/.cache/*\nprintf "\\nNew size: "\ndu -sh $HOME/.cache\n\n# Updating and ranking mirrors\nprintf "\\n${GRN}>> Updating and ranking mirrors in mirrorlist.${NC}\\n"\nsudo cp /etc/pacman.d/mirrorlist /etc/pacman.d/mirrorlist.backup\ncd $HOME\ncurl -s "https://archlinux.org/mirrorlist/?country=NL&country=DE&country=FR&country=BE&protocol=https&use_mirror_status=on" | sed -e \'s/^#Server/Server/\' -e \'/^#/d\' | rankmirrors -n 5 - > mirrorlist\nsudo mv mirrorlist /etc/pacman.d/mirrorlist\n\n# Done\nprintf "\\n${GRN}>> Done!${NC}\\n"\n\n'})}),"\n",(0,t.jsxs)(e.p,{children:["An up to date version of this script can be found in my ",(0,t.jsx)(e.a,{href:"https://joris.codes/#dotfiles",children:"dotfiles"}),"."]})]})}function p(n={}){const{wrapper:e}={...(0,a.R)(),...n.components};return e?(0,t.jsx)(e,{...n,children:(0,t.jsx)(h,{...n})}):h(n)}},8453:(n,e,r)=>{r.d(e,{R:()=>c,x:()=>s});var i=r(6540);const t={},a=i.createContext(t);function c(n){const e=i.useContext(a);return i.useMemo((function(){return"function"==typeof n?n(e):{...e,...n}}),[e,n])}function s(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(t):n.components||t:c(n.components),i.createElement(a.Provider,{value:e},n.children)}}}]);