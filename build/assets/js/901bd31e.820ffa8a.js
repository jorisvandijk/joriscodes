"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[2432],{1008:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>l,contentTitle:()=>a,default:()=>h,frontMatter:()=>r,metadata:()=>o,toc:()=>c});const o=JSON.parse('{"id":"linux/managing-dotfiles","title":"Managing dotfiles","description":"Everyone handles backing up their dotfiles in their own way. Some people use GNU Stow, some manually back them up, some don\'t bother and some have a script. I have a script.","source":"@site/docs/linux/managing-dotfiles.md","sourceDirName":"linux","slug":"/linux/managing-dotfiles","permalink":"/linux/managing-dotfiles","draft":false,"unlisted":false,"editUrl":"https://codeberg.org/jorisvandijk/joriscodes/src/branch/main/docs/linux/managing-dotfiles.md","tags":[{"inline":true,"label":"Linux","permalink":"/tags/linux"},{"inline":true,"label":"Dotfiles","permalink":"/tags/dotfiles"}],"version":"current","lastUpdatedBy":"Joris","lastUpdatedAt":1731918280000,"frontMatter":{"tags":["Linux","Dotfiles"]},"sidebar":"docsSidebar","previous":{"title":"Global playback control","permalink":"/linux/global-playback-control"},"next":{"title":"Connect to SSH using keys instead of password","permalink":"/linux/passkey-ssh"}}');var t=i(4848),s=i(8453);const r={tags:["Linux","Dotfiles"]},a="Managing dotfiles",l={},c=[{value:"Using this script",id:"using-this-script",level:2}];function d(e){const n={a:"a",admonition:"admonition",blockquote:"blockquote",code:"code",em:"em",h1:"h1",h2:"h2",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",...(0,s.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.header,{children:(0,t.jsx)(n.h1,{id:"managing-dotfiles",children:"Managing dotfiles"})}),"\n",(0,t.jsx)(n.p,{children:"Everyone handles backing up their dotfiles in their own way. Some people use GNU Stow, some manually back them up, some don't bother and some have a script. I have a script."}),"\n",(0,t.jsx)(n.p,{children:"First, if you're unaware what dotfiles are, I've explained them before as such:"}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsx)(n.p,{children:"Dotfiles are the configuration files used on your Linux system. They are usually denoted with a dot/period in front of them, which makes them invisible. Because of this character these configuration files are known as dotfiles."}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:"I don't like symlinks and I don't want to have copies of files on my drive. So here's how I manage them."}),"\n",(0,t.jsx)(n.p,{children:"Create an empty git repository directory on my system and when the time comes to back everything up, just copy all the dotfiles to this folder, run the git commands and delete the copies of these files. Obviously I am not going to do this manually, a script will do this for me as I stated above. This script:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",metastring:"showLineNumbers",children:'#!/usr/bin/env bash\n\n#\tDotfiles 3.1\n#\tManage dotfiles with a bash script\n#\tDependencies: git\n#\n#\tBy Joris van Dijk | Jorisvandijk.com \n#\tLicensed under the GNU General Public License v3.0\n\n# Locations\ndotfiles_repo=~/.dotfiles\ndotfiles_list=~/.bin/Dotfiles-list\n\n# Script\ncd $dotfiles_repo\n\nwhile read -r dotfile; do\n  if [[ -f $dotfile ]]; then\n    cp --parents $dotfile $dotfiles_repo\n  elif [[ -d $dotfile ]]; then\n    cp --parents -r $dotfile $dotfiles_repo\n  fi\ndone < $dotfiles_list\n\ngit add -A\n\nif [[ -n $(git status -s) ]]; then\n\n  git status\n  \n  read -p "Enter a commit message: " commit_message\n\n  git commit -m "$commit_message"\n  git push origin main\nfi\n\n# Cleanup\nfind $dotfiles_repo -mindepth 1 -maxdepth 1 -not -name ".git" -not -name ".gitignore" -exec rm -rf {} \\;\n\n'})}),"\n",(0,t.jsx)(n.h2,{id:"using-this-script",children:"Using this script"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsx)(n.li,{children:"Create a git repository on your favorite git host."}),"\n",(0,t.jsxs)(n.li,{children:["Clone this repository to your system, creating a directory. This directory should be set as ",(0,t.jsx)(n.code,{children:"dotfiles_repo"})," in the script under ",(0,t.jsx)(n.code,{children:"# Locations"}),". I named mine ",(0,t.jsx)(n.code,{children:".dotfiles"})," and stored it in my home directory."]}),"\n",(0,t.jsx)(n.li,{children:"Create a file which will house the locations of the dotfiles you want to back up. One dotfile, or complete directory per line. Mine looks like this:"}),"\n"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",metastring:"showLineNumbers",children:"/home/joris/.config/bspwm\n/home/joris/.config/dunst\n/home/joris/.config/feh\n/home/joris/.config/gtk-3.0\n/home/joris/.config/kitty\n/home/joris/.config/micro\n/home/joris/.config/mpv\n/home/joris/.config/newsboat\n/home/joris/.config/parcellite\n/home/joris/.config/picom\n/home/joris/.config/sxhkd\n/home/joris/.icons\n/home/joris/.local/share/applications/microlaunch.desktop\n/home/joris/.themes\n/home/joris/.bin\n/home/joris/.bashrc\n/home/joris/.bash_profile\n/home/joris/.Xresources\n/home/joris/.mozilla/firefox/17yhl6to.default-release/chrome\n/etc/pacman.conf\n/etc/pacman.d/mirrorlist\n/etc/modprobe.d/nobeep.conf\n"})}),"\n",(0,t.jsx)(n.admonition,{type:"note",children:(0,t.jsxs)(n.p,{children:["As you can see I am not only backing up dotfiles from my home directory, but also files from root. (Granted these are not ",(0,t.jsx)(n.em,{children:"technically"})," dotfiles, but they are configuration files nonetheless.)"]})}),"\n",(0,t.jsxs)(n.ol,{start:"4",children:["\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:["Save the file somewhere on your system and enter its location in the script after ",(0,t.jsx)(n.code,{children:"dotfiles_list"})," under ",(0,t.jsx)(n.code,{children:"# Locations"}),". Mine is at ",(0,t.jsx)(n.code,{children:"~/.bin/Dotfiles-list"}),"."]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:["Set up a ",(0,t.jsx)(n.code,{children:".gitignore"})," file to make sure some stuff does not get backed up. For example, Micro keeps a buffer, history and backups in its .config location. And while I do want to back up my Micro settings, I do not want to back up these temporary files. I therefor add a ",(0,t.jsx)(n.code,{children:".gitignore"}),"*file to the repository directory (.dotfiles) with the following content:"]}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",metastring:"showLineNumbers",children:"home/joris/.config/micro/buffers\nhome/joris/.config/micro/history\nhome/joris/.config/micro/backups\n"})}),"\n",(0,t.jsx)(n.p,{children:"And that's it. Next time you want to back up your dotfiles, you can just run the script. It will grab a copy of all the files you listed and plonk those into the directory you specified. It will then git add them, ask for a commit message and push the files to git. It will then clean up the directory by deleting all the copied files, this way you don't have duplicates on your system."}),"\n",(0,t.jsxs)(n.p,{children:["It will also maintain the directory structure, which results in a very organized git repository online, as you can see when looking at ",(0,t.jsx)(n.a,{href:"https://joris.codes/#dotfiles",children:"mine"}),". You'll also find the most up to date version of the script here."]})]})}function h(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(d,{...e})}):d(e)}},8453:(e,n,i)=>{i.d(n,{R:()=>r,x:()=>a});var o=i(6540);const t={},s=o.createContext(t);function r(e){const n=o.useContext(s);return o.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:r(e.components),o.createElement(s.Provider,{value:n},e.children)}}}]);